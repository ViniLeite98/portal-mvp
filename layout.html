function menuLink(label, href, active){
  const cls = active === href ? "btn primary" : "btn";
  return `<a class="${cls}" href="./${href}">${label}</a>`;
}

function initLayout(active){
  const header = document.getElementById("app-header");
  const menu = document.getElementById("app-menu");

  // HEADER
  header.innerHTML = `
    <div class="wrap">
      <div class="top">
        <div class="brand">
          <div>
            <h1>Portal MVP</h1>
            <div class="muted">${document.title.replace("Portal MVP • ","")}</div>
          </div>
        </div>

        <div class="kpi">
          <span class="pill">Total: <strong id="kpiTotal">0</strong></span>
          <span class="pill">Abertas: <strong id="kpiOpen">0</strong></span>
          <span class="pill">Aprovadas: <strong id="kpiApproved">0</strong></span>
          <span class="pill">Ativas: <strong id="kpiTherapistsActive">0</strong></span>
        </div>
      </div>
    </div>
  `;

  // MENU LATERAL (SIDEBAR)
  menu.innerHTML = `
    <div class="card">
      <div class="hd">
        <div class="muted">Navegação</div>
      </div>

      <div class="bd nav">
        ${menuLink("Início", "index.html", active)}
        ${menuLink("Nova solicitação", "nova-solicitacao.html", active)}
        ${menuLink("Solicitações", "solicitacoes.html", active)}
        ${menuLink("Equipe", "equipe.html", active)}
        ${menuLink("Terapeutas", "terapeutas.html", active)}
        ${menuLink("Governança", "governanca.html", active)}
      </div>

      <div class="ft" style="margin-top:16px">
        <button class="btn danger small" id="btnReset">Zerar dados</button>
        <div class="muted" style="margin-top:6px">Somente local</div>
      </div>
    </div>
  `;

  // KPIs + Reset
  if (window.App){
    App.renderKpis?.();
    App.renderTherapistsKpis?.();
    App.wireResetButton?.();
  }
}
