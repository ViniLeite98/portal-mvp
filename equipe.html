<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Gestão da Equipe</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body { margin:0; font-family:Arial; background:#f5f7fb; }
.sidebar {
  width:230px; background:#1f2937; color:#fff;
  height:100vh; position:fixed; padding:20px;
}
.sidebar a {
  display:block; color:#cbd5e1; text-decoration:none;
  padding:10px; border-radius:10px; margin-bottom:6px;
}
.sidebar a.active, .sidebar a:hover { background:#374151; color:#fff; }
.content { margin-left:260px; padding:30px; }

.card { background:#fff; border-radius:28px; padding:20px; }

table { width:100%; border-collapse:collapse; margin-top:15px; }
th, td { padding:12px; border-bottom:1px solid #e5e7eb; }

.actions i { cursor:pointer; margin-right:10px; }
.actions .fa-trash { color:#dc2626; }

button {
  background:#1f2937; color:#fff;
  border:none; padding:8px 14px;
  border-radius:8px; cursor:pointer;
}

/* MODAL */
#modal {
  display:none; position:fixed; inset:0;
  background:rgba(0,0,0,.4);
  justify-content:center; align-items:center;
}
#modalContent {
  background:#fff; width:800px;
  border-radius:28px; padding:25px;
}
.form {
  display:grid; grid-template-columns:1fr 1fr;
  gap:12px;
}
.form label { font-size:13px; }
.form input, .form select {
  padding:7px; border-radius:6px;
  border:1px solid #ccc;
}
.full { grid-column:1 / -1; }
</style>
</head>

<body>

<nav class="sidebar">
  <a href="index.html">Início</a>
  <a href="equipe.html" class="active">Gestão da Equipe</a>
  <a href="solicitacoes.html">Solicitações</a>
  <a href="escalas.html">Escalas</a>
  <a href="materiais.html">Materiais</a>
  <a href="financeiro.html">Financeiro</a>
</nav>

<div class="content">
  <h1>Gestão da Equipe</h1>

  <div class="card">
    <button onclick="abrirModal()">+ Nova Terapeuta</button>

    <table>
      <thead>
        <tr>
          <th>Nome</th>
          <th>Folga</th>
          <th>Início</th>
          <th>Horário</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="lista"></tbody>
    </table>
  </div>
</div>

<!-- MODAL -->
<div id="modal">
  <div id="modalContent">
    <h2>Terapeuta</h2>

    <div class="form">
      <div>
        <label>Nome Completo</label>
        <input id="nomeCompleto">
      </div>
      <div>
        <label>Nome Profissional</label>
        <input id="nomeProfissional">
      </div>

      <div>
        <label>CPF</label>
        <input id="cpf">
      </div>
      <div>
        <label>Email</label>
        <input id="email">
      </div>

      <div>
        <label>Folga Semanal</label>
        <select id="folgaSemanal">
          <option value="">Não</option>
          <option>Segunda</option><option>Terça</option>
          <option>Quarta</option><option>Quinta</option>
          <option>Sexta</option><option>Sábado</option><option>Domingo</option>
        </select>
      </div>

      <div>
        <label>Status</label>
        <select id="status">
          <option>Ativo</option>
          <option>Inativo</option>
        </select>
      </div>

      <div>
        <label>Entrada</label>
        <input type="time" id="horarioEntrada">
      </div>
      <div>
        <label>Saída</label>
        <input type="time" id="horarioSaida">
      </div>

      <div class="full">
        <label>Data de Início</label>
        <input type="date" id="dataInicio">
      </div>
    </div>

    <br>
    <button onclick="salvar()">Salvar</button>
    <button onclick="fecharModal()">Cancelar</button>
  </div>
</div>

<script>
let terapeutas = JSON.parse(localStorage.getItem("terapeutas")) || [];
let editId = null;

const modal = document.getElementById("modal");

function abrirModal() {
  editId = null;
  limparFormulario();
  modal.style.display = "flex";
}

function fecharModal() {
  modal.style.display = "none";
}

function limparFormulario() {
  nomeCompleto.value = "";
  nomeProfissional.value = "";
  cpf.value = "";
  email.value = "";
  folgaSemanal.value = "";
  horarioEntrada.value = "";
  horarioSaida.value = "";
  dataInicio.value = "";
  status.value = "Ativo";
}

function salvar() {
  const t = {
    id: editId || Date.now().toString(),
    nomeCompleto: nomeCompleto.value,
    nomeProfissional: nomeProfissional.value,
    cpf: cpf.value,
    email: email.value,
    folgaSemanal: folgaSemanal.value,
    horarioEntrada: horarioEntrada.value,
    horarioSaida: horarioSaida.value,
    dataInicio: dataInicio.value,
    status: status.value
  };

  if (editId) {
    terapeutas = terapeutas.map(x => x.id === editId ? t : x);
  } else {
    terapeutas.push(t);
  }

  localStorage.setItem("terapeutas", JSON.stringify(terapeutas));
  fecharModal();
  render();
}

function editar(id) {
  const t = terapeutas.find(x => x.id === id);
  if (!t) return;

  editId = id;
  nomeCompleto.value = t.nomeCompleto;
  nomeProfissional.value = t.nomeProfissional;
  cpf.value = t.cpf;
  email.value = t.email;
  folgaSemanal.value = t.folgaSemanal;
  horarioEntrada.value = t.horarioEntrada;
  horarioSaida.value = t.horarioSaida;
  dataInicio.value = t.dataInicio;
  status.value = t.status;

  modal.style.display = "flex";
}

function excluir(id) {
  if (!confirm("Excluir terapeuta?")) return;
  terapeutas = terapeutas.filter(t => t.id !== id);
  localStorage.setItem("terapeutas", JSON.stringify(terapeutas));
  render();
}

function render() {
  lista.innerHTML = "";
  terapeutas.forEach(t => {
    lista.innerHTML += `
      <tr>
        <td>${t.nomeProfissional}</td>
        <td>${t.folgaSemanal || "—"}</td>
        <td>${t.dataInicio || ""}</td>
        <td>${t.horarioEntrada || ""} – ${t.horarioSaida || ""}</td>
        <td class="actions">
          <i class="fa-solid fa-pen" onclick="editar('${t.id}')"></i>
          <i class="fa-solid fa-trash" onclick="excluir('${t.id}')"></i>
        </td>
      </tr>
    `;
  });
}

render();
</script>

</body>
</html>
