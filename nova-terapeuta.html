<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Nova Terapeuta</title>

<!-- ÍCONES -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- CSS GLOBAL -->
<link rel="stylesheet" href="assets/css/style.css">

<!-- CSS SIDEBAR -->
<link rel="stylesheet" href="assets/sidebar/sidebar.css">

<style>
.content {
  padding: 30px;
  font-size: 14px;
}

.section {
  background:#fff;
  border-radius:20px;
  padding:24px;
  margin-bottom:24px;
  box-shadow:0 4px 12px rgba(0,0,0,.05);
}

.section h3 {
  margin-bottom:16px;
  border-bottom:1px solid #e5e7eb;
  padding-bottom:8px;
}

.grid {
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:16px;
}

.grid-2 {
  grid-template-columns: repeat(2, 1fr);
}

label {
  font-weight:600;
  font-size:13px;
}

input, select {
  width:100%;
  padding:6px;
  border-radius:6px;
  border:1px solid #d1d5db;
}

.actions {
  margin-top:20px;
}

button {
  background:#1f2937;
  color:#fff;
  border:none;
  border-radius:8px;
  padding:10px 18px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app">
  <aside id="sidebar"></aside>

  <main class="content">
    <h1>Cadastro de Terapeuta</h1>

    <!-- DADOS PESSOAIS -->
    <div class="section">
      <h3>Dados Pessoais</h3>
      <div class="grid">
        <div>
          <label>Nome Completo *</label>
          <input id="nomeCompleto" required>
        </div>

        <div>
          <label>Nome Profissional *</label>
          <input id="nomeProfissional" required>
        </div>

        <div>
          <label>CPF *</label>
          <input id="cpf" maxlength="14">
        </div>

        <div>
          <label>RG</label>
          <input id="rg">
        </div>

        <div>
          <label>Data de Nascimento</label>
          <input type="date" id="nascimento">
        </div>

        <div>
          <label>Email *</label>
          <input id="email">
        </div>

        <div>
          <label>Tipo Sanguíneo</label>
          <select id="tipoSanguineo">
            <option></option>
            <option>A+</option><option>A-</option>
            <option>B+</option><option>B-</option>
            <option>AB+</option><option>AB-</option>
            <option>O+</option><option>O-</option>
          </select>
        </div>
      </div>
    </div>

    <!-- CONTATOS -->
    <div class="section">
      <h3>Contatos</h3>
      <div class="grid-2 grid">
        <div>
          <label>Telefone *</label>
          <input id="telefone" oninput="formatarTelefone(this)">
        </div>
        <div>
          <label>Contato Emergência</label>
          <input id="telefoneEmergencia" oninput="formatarTelefone(this)">
        </div>
      </div>
    </div>

    <!-- ENDEREÇO -->
    <div class="section">
      <h3>Endereço</h3>
      <div class="grid">
        <div><label>CEP</label><input id="cep"></div>
        <div><label>Rua</label><input id="rua"></div>
        <div><label>Número</label><input id="numero"></div>
        <div><label>Complemento</label><input id="complemento"></div>
        <div><label>Bairro</label><input id="bairro"></div>
        <div><label>Cidade</label><input id="cidade"></div>
        <div><label>UF</label><input id="uf"></div>
      </div>
    </div>

    <!-- PAGAMENTO -->
    <div class="section">
      <h3>Dados de Pagamento</h3>
      <div class="grid-2 grid">
        <div>
          <label>Tipo de Chave PIX</label>
          <select id="tipoPix">
            <option></option>
            <option>CPF</option>
            <option>Email</option>
            <option>Telefone</option>
            <option>Aleatória</option>
          </select>
        </div>
        <div>
          <label>Chave PIX</label>
          <input id="chavePix">
        </div>
      </div>
    </div>

    <!-- FUNCIONAL -->
    <div class="section">
      <h3>Dados Funcionais</h3>
      <div class="grid">
        <div>
          <label>Tem folga semanal?</label>
          <select id="temFolga">
            <option>Sim</option>
            <option>Não</option>
          </select>
        </div>

        <div>
          <label>Dia da Folga</label>
          <select id="diaFolga">
            <option></option>
            <option>Segunda</option><option>Terça</option>
            <option>Quarta</option><option>Quinta</option>
            <option>Sexta</option><option>Sábado</option>
            <option>Domingo</option>
          </select>
        </div>

        <div>
          <label>Horário Entrada</label>
          <input type="time" id="horaEntrada">
        </div>

        <div>
          <label>Horário Saída</label>
          <input type="time" id="horaSaida">
        </div>

        <div>
          <label>Data de Início *</label>
          <input type="date" id="dataInicio">
        </div>

        <div>
          <label>Status *</label>
          <select id="status">
            <option>Ativo</option>
            <option>Inativo</option>
          </select>
        </div>
      </div>
    </div>

    <div class="actions">
      <button onclick="salvar()">Salvar</button>
    </div>
  </main>
</div>

<script src="assets/sidebar/sidebar.js"></script>

<script>
function cpfValido(cpf) {
  cpf = cpf.replace(/\D/g, "");
  if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;
  let soma = 0;
  for (let i=0;i<9;i++) soma += cpf[i]*(10-i);
  let resto = (soma*10)%11;
  if (resto==10) resto=0;
  if (resto!=cpf[9]) return false;
  soma=0;
  for (let i=0;i<10;i++) soma += cpf[i]*(11-i);
  resto=(soma*10)%11;
  if (resto==10) resto=0;
  return resto==cpf[10];
}

function emailValido(email){
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function formatarTelefone(i){
  let v=i.value.replace(/\D/g,"").slice(0,11);
  i.value=v.length>6?`(${v.slice(0,2)}) ${v.slice(2,7)}-${v.slice(7)}`:
          v.length>2?`(${v.slice(0,2)}) ${v.slice(2)}`:v;
}

function salvar(){
  const cpf=document.getElementById("cpf").value;
  if(!cpfValido(cpf)) return alert("CPF inválido");

  const email=document.getElementById("email").value;
  if(!emailValido(email)) return alert("Email inválido");

  let terapeutas=JSON.parse(localStorage.getItem("terapeutas")||"[]");
  if(terapeutas.some(t=>t.cpf===cpf)) return alert("CPF já cadastrado");

  terapeutas.push({
    cpf,
    nomeCompleto:nomeCompleto.value,
    nomeProfissional:nomeProfissional.value,
    rg:rg.value,
    nascimento:nascimento.value,
    email,
    tipoSanguineo:tipoSanguineo.value,
    telefone:telefone.value,
    telefoneEmergencia:telefoneEmergencia.value,
    endereco:{cep:cep.value,rua:rua.value,numero:numero.value,complemento:complemento.value,bairro:bairro.value,cidade:cidade.value,uf:uf.value},
    pix:{tipo:tipoPix.value,chave:chavePix.value},
    temFolga:temFolga.value,
    diaFolga:diaFolga.value,
    horaEntrada:horaEntrada.value,
    horaSaida:horaSaida.value,
    dataInicio:dataInicio.value,
    status:status.value
  });

  localStorage.setItem("terapeutas",JSON.stringify(terapeutas));
  location.href="equipe.html";
}
</script>

</body>
</html>
