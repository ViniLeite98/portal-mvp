document.addEventListener("DOMContentLoaded", () => {
  fetch("sidebar.html")
    .then(r => {
      if (!r.ok) throw new Error("Sidebar nÃ£o encontrada");
      return r.text();
    })
    .then(html => {
      const sidebar = document.getElementById("sidebar");
      if (!sidebar) throw new Error("Container #sidebar nÃ£o existe");
      sidebar.innerHTML = html;
      initSidebar();
    })
    .catch(err => console.error(err));
});

function initSidebar() {
  // accordion
  document.querySelectorAll(".menu-title").forEach(title => {
    title.addEventListener("click", () => {
      title.parentElement.classList.toggle("active");
    });
  });

  // link ativo
  const page = location.pathname.split("/").pop().replace(".html","");
  document.querySelectorAll(".sidebar a[data-page]").forEach(a => {
    if (a.dataset.page === page) a.classList.add("active");
  });
}
