<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Escalas</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body { margin:0; font-family:Arial; background:#f5f7fb; }

/* SIDEBAR */
.sidebar {
  width:230px;
  background:#1f2937;
  color:#fff;
  height:100vh;
  position:fixed;
  padding:20px;
}
.sidebar h2 { margin-bottom:30px; }
.sidebar a {
  display:flex;
  align-items:center;
  gap:10px;
  color:#cbd5e1;
  text-decoration:none;
  padding:10px;
  border-radius:10px;
  margin-bottom:6px;
}
.sidebar a:hover,
.sidebar a.active {
  background:#374151;
  color:#fff;
}

/* CONTEÚDO */
.content { margin-left:260px; padding:30px; }

.card {
  background:#fff;
  border-radius:20px;
  padding:24px;
  box-shadow:0 4px 12px rgba(0,0,0,.05);
}

/* CALENDÁRIO */
.calendar {
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:8px;
  margin-top:16px;
}

.weekdays div {
  text-align:center;
  font-weight:600;
  font-size:13px;
  color:#374151;
}

.day {
  background:#fff;
  border-radius:10px;
  padding:10px;
  cursor:pointer;
  min-height:80px;
  border:1px solid #e5e7eb;
}

.day:hover {
  background:#f9fafb;
}

.day.disabled {
  background:#f3f4f6;
  color:#9ca3af;
  cursor:not-allowed;
}

.day.disabled:hover {
  background:#f3f4f6;
}

.day-number {
  font-weight:700;
  font-size:14px;
}

.panel {
  margin-top:20px;
  padding:16px;
  border-radius:14px;
  background:#f9fafb;
  display:none;
}
</style>
</head>

<body>

<nav class="sidebar">
  <h2>Hara Spa</h2>
  <a href="index.html"><i class="fa-solid fa-house"></i> Início</a>
  <a href="equipe.html"><i class="fa-solid fa-users"></i> Gestão da Equipe</a>
  <a href="solicitacoes.html"><i class="fa-solid fa-calendar-xmark"></i> Solicitações</a>
  <a href="escalas.html" class="active"><i class="fa-solid fa-calendar-days"></i> Escalas</a>
  <a href="materiais.html"><i class="fa-solid fa-box-open"></i> Materiais</a>
  <a href="financeiro.html"><i class="fa-solid fa-coins"></i> Financeiro</a>
</nav>

<div class="content">
  <h1>Escalas</h1>

  <div class="card">
    <input type="month" id="mes" style="padding:6px" />
    
    <!-- DIAS DA SEMANA -->
    <div class="calendar weekdays">
      <div>Dom</div><div>Seg</div><div>Ter</div>
      <div>Qua</div><div>Qui</div><div>Sex</div><div>Sáb</div>
    </div>

    <!-- CALENDÁRIO -->
    <div class="calendar" id="calendar"></div>

    <!-- PAINEL -->
    <div class="panel" id="panel"></div>
  </div>
</div>

<script>
const calendar = document.getElementById("calendar");
const panel = document.getElementById("panel");
const mesInput = document.getElementById("mes");

mesInput.value = new Date().toISOString().slice(0,7);

/* FERIADOS */
function isFeriado(data){
  const feriados = JSON.parse(localStorage.getItem("feriados") || "[]");
  return feriados.includes(data.toISOString().slice(0,10));
}

function renderCalendar(){
  calendar.innerHTML = "";
  panel.style.display = "none";

  const [ano, mes] = mesInput.value.split("-");
  const primeiroDia = new Date(ano, mes-1, 1);
  const ultimoDia = new Date(ano, mes, 0);
  const offset = primeiroDia.getDay();

  for(let i=0;i<offset;i++){
    calendar.appendChild(document.createElement("div"));
  }

  for(let d=1; d<=ultimoDia.getDate(); d++){
    const data = new Date(ano, mes-1, d);
    const div = document.createElement("div");
    div.className = "day";

    const domingo = data.getDay() === 0;
    const feriado = isFeriado(data);

    if(domingo || feriado){
      div.classList.add("disabled");
      div.innerHTML = `<div class="day-number">${d}</div>`;
    } else {
      div.innerHTML = `<div class="day-number">${d}</div>`;
      div.onclick = () => mostrarDia(data);
    }

    calendar.appendChild(div);
  }
}

function mostrarDia(data){
  panel.style.display = "block";
  panel.innerHTML = `
    <h3>${data.toLocaleDateString("pt-BR")}</h3>
    <p>Detalhamento de escala (em breve)</p>
  `;
}

mesInput.onchange = renderCalendar;
renderCalendar();
</script>

</body>
</html>
