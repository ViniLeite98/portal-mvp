<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>In√≠cio</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body { margin:0; font-family:Arial; background:#f5f7fb; }
.sidebar {
  width:230px; background:#1f2937; color:#fff;
  height:100vh; position:fixed; padding:20px;
}
.sidebar h2 { margin-bottom:30px; }
.sidebar a {
  display:flex; align-items:center; gap:10px;
  color:#cbd5e1; text-decoration:none;
  padding:10px; border-radius:10px; margin-bottom:6px;
}
.sidebar a.active, .sidebar a:hover { background:#374151; color:#fff; }

.content { margin-left:260px; padding:30px; }

.cards { display:grid; grid-template-columns:1.1fr 1.6fr 1.2fr; gap:16px; }
.card {
  background:#fff; border-radius:18px;
  padding:18px; box-shadow:0 0 8px rgba(0,0,0,.05);
}
.kpi { font-size:34px; font-weight:700; }
.small { font-size:12px; color:#6b7280; }

.section-row { display:grid; grid-template-columns:3.2fr 1.3fr; gap:16px; margin-top:20px; }
.section-actions { display:grid; grid-template-columns:repeat(3,1fr); gap:16px; margin-top:30px; }

button {
  width:100%; padding:10px; border-radius:10px;
  border:none; background:#1f2937; color:#fff; cursor:pointer;
}
</style>
</head>

<body>

<nav class="sidebar">
  <h2>Hara Spa</h2>
  <a href="index.html" class="active"><i class="fa-solid fa-house"></i> In√≠cio</a>
  <a href="equipe.html"><i class="fa-solid fa-users"></i> Gest√£o da Equipe</a>
  <a href="solicitacoes.html"><i class="fa-solid fa-calendar-xmark"></i> Solicita√ß√µes</a>
  <a href="escalas.html"><i class="fa-solid fa-calendar-days"></i> Escalas</a>
  <a href="materiais.html"><i class="fa-solid fa-box-open"></i> Materiais</a>
  <a href="financeiro.html"><i class="fa-solid fa-coins"></i> Financeiro</a>
</nav>

<div class="content">
  <h1>In√≠cio</h1>

  <div class="cards">
    <div class="card">
      <h3>Equipe üë•</h3>
      <div id="kpiEquipe" class="kpi">0</div>
      <div class="small">Funcion√°rias ativas</div>
    </div>

    <div class="card">
      <h3>Pr√≥ximas Datas üìÖ</h3>
      <div class="small">‚Äî</div>
    </div>

    <div class="card">
      <h3>Dias Folgados üèÜ</h3>
      <div id="diasFolga" class="small"></div>
    </div>
  </div>

  <div class="section-row">
    <div class="card">
      <h3>For√ßa de Trabalho</h3>
      <canvas id="grafico"></canvas>
      <div class="small">Distribui√ß√£o por hora</div>
    </div>

    <div class="card">
      <h3>Carga Hor√°ria</h3>
      <div id="rankHoras" class="small"></div>
    </div>
  </div>

  <div class="section-actions">
    <div class="card">
      <h3>Gest√£o de Terapeutas</h3>
      <p class="small">Cadastrar e editar terapeutas</p>
      <button onclick="location.href='equipe.html'">Gerir equipe</button>
    </div>

    <div class="card">
      <h3>Solicita√ß√µes</h3>
      <p class="small">Faltas, f√©rias e viagens</p>
      <button onclick="location.href='solicitacoes.html'">Ver solicita√ß√µes</button>
    </div>

    <div class="card">
      <h3>Escalas</h3>
      <p class="small">Distribui√ß√£o por data</p>
      <button onclick="location.href='escalas.html'">Criar escalas</button>
    </div>
  </div>
</div>

<script>
const terapeutas = JSON.parse(localStorage.getItem("terapeutas")) || [];
const solicitacoes = JSON.parse(localStorage.getItem("solicitacoes")) || [];

const ativas = terapeutas.filter(t => !t.status || t.status === "Ativo");
document.getElementById("kpiEquipe").innerText = ativas.length;

const dias = {};
solicitacoes.filter(s=>s.status==="Aprovado").forEach(s=>{
  const ini=new Date(s.dtInicio), fim=new Date(s.dtFim);
  const d=Math.floor((fim-ini)/86400000)+1;
  dias[s.terapeutaNome]=(dias[s.terapeutaNome]||0)+d;
});
document.getElementById("diasFolga").innerHTML =
  Object.entries(dias).map(([n,v])=>`<div><b>${n}</b>: ${v} dias</div>`).join("") || "‚Äî";
</script>

</body>
</html>
