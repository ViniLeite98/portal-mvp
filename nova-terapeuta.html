<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Nova Terapeuta</title>

<link rel="stylesheet" href="assets/css/style.css">
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>

<nav class="sidebar">
  <h2>Hara Spa</h2>
  <a href="equipe.html"><i class="fa-solid fa-arrow-left"></i> Voltar</a>
</nav>

<div class="content">
  <h1 id="titulo">Nova Terapeuta</h1>

  <label>Nome</label><br>
  <input id="nome"><br><br>

  <label>Folga semanal</label><br>
  <select id="folga">
    <option>Segunda</option>
    <option>Terça</option>
    <option>Quarta</option>
    <option>Quinta</option>
    <option>Sexta</option>
    <option>Sábado</option>
    <option>Domingo</option>
  </select><br><br>

  <label>Dias de folga / ano</label><br>
  <input id="dias" type="number"><br><br>

  <button onclick="salvar()">Salvar</button>
</div>

<script>
let editandoId = null;

function carregarEdicao() {
  const id = localStorage.getItem("editarTerapeutaId");
  if (!id) return;

  editandoId = Number(id);
  document.getElementById("titulo").innerText = "Editar Terapeuta";

  const terapeutas =
    JSON.parse(localStorage.getItem("terapeutas")) || [];

  const t = terapeutas.find(x => x.id === editandoId);
  if (!t) return;

  nome.value = t.nome;
  folga.value = t.folga;
  dias.value = t.dias;
}

function salvar() {
  const nomeVal = nome.value.trim();
  if (!nomeVal) {
    alert("Informe o nome");
    return;
  }

  let terapeutas =
    JSON.parse(localStorage.getItem("terapeutas")) || [];

  if (editandoId) {
    terapeutas = terapeutas.map(t =>
      t.id === editandoId
        ? { ...t, nome: nomeVal, folga: folga.value, dias: dias.value }
        : t
    );
    localStorage.removeItem("editarTerapeutaId");
  } else {
    terapeutas.push({
      id: Date.now(),
      nome: nomeVal,
      folga: folga.value,
      dias: dias.value,
      status: "Ativa"
    });
  }

  localStorage.setItem("terapeutas", JSON.stringify(terapeutas));
  window.location.href = "equipe.html";
}

carregarEdicao();
</script>

</body>
</html>
